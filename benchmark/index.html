<html>
    <head>
        <style>
            table, th, td {
                border: 1px solid black;
                border-collapse: collapse;
            }
            * {
                box-sizing: border-box;
            }

            body {
                margin: 0;
            }

            .column {
                float: left;
                padding: 10px;
            }

            .left {
              width: 35%;
            }

            .right {
              width: 65%;
            }

            .row:after {
                content: "";
                display: table;
                clear: both;
            }
        </style>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script>
            var interval = setInterval(getData, 1000);

            function getData() {
                getDataBlockchain();
                getDataCall();
                getDataWrite();
                getDataRead();
                getDataReadZero();
            }

            function getDataBlockchain() {
                $.getJSON('WriteReadResult.json', function(data) {

                    $.getJSON('blockData.json', function(blockdata) {

                        if(data.Blockchain != undefined)
                        {
                            var el = '<h2>Blockchain</h2>' +
                                    '<h3>Tx per method: '+data.Blockchain.numOfTx+'' + " tx </h3>" +
                                    '<h3>Difficulty: '+data.Blockchain.difficulty+'</h3>' +
                                    '<h3>Block Time: '+data.Blockchain.blocktime.toFixed(4)+' Sec</h3>' +
                                    '<h3>Tx per block: '+blockdata.txPerBlock+'</h3>'
                                    ;

                            $(".blockchain").empty();
                            $(el).appendTo(".blockchain");
                        }
                        else
                        {
                            $(".blockchain").empty();
                        }

                    });
                    
                });
            }

            function getDataCall() {
                $.getJSON('CallResult.json', function(data) {
                    if(data.Call.length > 0)
                    {
                        var tb = '<h2>Call</h2><table id="tb_call" border="1">' +
                                '<thead>' +
                                '<th>Frequency (time)</th>'+
                                '<th>Latency (sec)</th>'+
                                '<th>Throughput (time/s)</th>'+
                                '</thead>'+
                                '<tbody></tbody></table>';

                        $(".call").empty();
                        $(tb).appendTo(".call");

                        $.each(data.Call, function(i, f) {
                            var tbRow = "<tr>" + 
                                        "<td align='right'>" + f.size + "</td>" +
                                        "<td align='right'>" + f.latency.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.throughput.toFixed(4) + "</td>" + 
                                        "</tr>";

                            $(tbRow).appendTo("#tb_call tbody");
                        });
                    }
                });
            }

            function getDataWrite() {
                $.getJSON('WriteReadResult.json', function(data) {
                    if(data.Write.length > 0)
                    {
                        var tb = '<h2>Write</h2><table id= "tb_write" border="1">' +
                                '<thead>' +
                                '<th>Size (byte)</th>'+
                                '<th>Call latency (sec)</th>'+
                                '<th>Send TX latency (sec)</th>'+
                                '<th>Complete latency (sec)</th>'+
                                '<th>Call throughput (tx/sec)</th>'+
                                '<th>Send TX throughput (tx/sec)</th>'+
                                '<th>Complete throughput (tx/sec)</th>'+
                                '</thead>'+
                                '<tbody></tbody></table>';

                        $(".write").empty();
                        $(tb).appendTo(".write");

                        $.each(data.Write, function(i, f) {
                            var tbRow = "<tr>" + 
                                        "<td align='right'>" + f.size + "</td>" +
                                        "<td align='right'>" + f.call_latency.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.sendTX_latency.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.completed_latency.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.call_throughput.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.sendTX_throughput.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.completed_throughput.toFixed(4) + "</td>" + 
                                        "</tr>";

                            $(tbRow).appendTo("#tb_write tbody");
                        });
                    }
                });
            }

            function getDataRead() {
                $.getJSON('WriteReadResult.json', function(data) {

                    if(data.Read.length > 0)
                    {
                        var tb = '<h2>Read</h2><table id= "tb_read" border="1">' +
                                '<thead>' +
                                '<th>Size (byte)</th>'+
                                '<th>Complete latency (sec)</th>'+
                                '<th>Complete throughput (tx/sec)</th>'+
                                '</thead>'+
                                '<tbody></tbody></table>';

                        $(".read").empty();
                        $(tb).appendTo(".read");

                        $.each(data.Read, function(i, f) {
                            var tbRow = "<tr>" + 
                                        "<td align='right'>" + f.size + "</td>" +
                                        "<td align='right'>" + f.latency.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.throughput.toFixed(4) + "</td>" + 
                                        "</tr>";

                            $(tbRow).appendTo("#tb_read tbody");
                        });
                    }
                });
            }

            function getDataReadZero() {
                $.getJSON('WriteReadResult.json', function(data) {

                    if(data.ReadZero.length > 0)
                    {
                        var tb = '<h2>Read Zero (For loop in Contract)</h2><table id= "tb_readZero" border="1">' +
                                '<thead>' +
                                '<th>Size (byte)</th>'+
                                '<th>Complete latency (sec)</th>'+
                                '<th>Complete throughput (tx/sec)</th>'+
                                '</thead>'+
                                '<tbody></tbody></table>';

                        $(".readZero").empty();
                        $(tb).appendTo(".readZero");

                        $.each(data.ReadZero, function(i, f) {
                            var tbRow = "<tr>" + 
                                        "<td align='right'>" + f.size + "</td>" +
                                        "<td align='right'>" + f.latency.toFixed(4) + "</td>" + 
                                        "<td align='right'>" + f.throughput.toFixed(4) + "</td>" + 
                                        "</tr>";

                            $(tbRow).appendTo("#tb_readZero tbody");
                        });
                    }
                });
            }

            $(function() {
                $.ajaxSetup({ cache: false });
            });

            </script>
    </head>

    <body>

        <div class="row">
            <div class="column left  blockchain">
            </div>
            <div class="column right">
            </div>
        </div>
        <div class="row">
            <div class="column write">
            </div>
        </div>
        <div class="row">
            <div class="column left read">
            </div>
            <div class="column right readZero">
            </div>
        </div>

    </body>
</html>